<svg viewBox="0 0 1100 800" width="1100" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .box { fill: #fff; stroke: #000; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #000; }
      .title-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #000; }
      .header { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #000; }
      .line { stroke: #000; stroke-width: 2; fill: none; }
      .arrow { fill: #000; }
      .step-text { font-family: Arial, sans-serif; font-size: 11px; fill: #000; font-style: italic; }
    </style>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" class="arrow" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="550" y="30" text-anchor="middle" class="header">AWS PII Redaction Pipeline</text>
  <text x="550" y="55" text-anchor="middle" style="font-size: 14px; fill: #666;">Automated PII Detection for GDPR/CCPA Compliance</text>
  
  <!-- Step 1: S3 Input Bucket -->
  <rect x="100" y="120" width="280" height="140" class="box" rx="5"/>
  <text x="240" y="150" text-anchor="middle" class="title-text">S3 Bucket (Input)</text>
  <text x="240" y="170" text-anchor="middle" style="font-size: 11px;">Document Upload</text>
  
  <text x="120" y="195" class="text" style="font-size: 11px; font-weight: bold;">Supported Formats:</text>
  <text x="120" y="215" class="text" style="font-size: 10px;">• PDF documents</text>
  <text x="120" y="235" class="text" style="font-size: 10px;">• DOCX files</text>
  <text x="120" y="255" class="text" style="font-size: 10px;">• TXT plain text</text>
  
  <text x="270" y="215" class="text" style="font-size: 10px;">• CSV data files</text>
  <text x="270" y="235" class="text" style="font-size: 10px;">• JSON documents</text>
  <text x="270" y="255" class="text" style="font-size: 10px;">• Email files</text>
  
  <!-- Trigger Event -->
  <line x1="380" y1="190" x2="480" y2="190" class="line" marker-end="url(#arrowhead)"/>
  <text x="400" y="180" class="step-text">S3 Event Trigger</text>
  <text x="400" y="210" class="step-text">(on upload)</text>
  
  <!-- Step 2: Lambda Function -->
  <rect x="480" y="120" width="280" height="140" class="box" rx="5"/>
  <text x="620" y="150" text-anchor="middle" class="title-text">AWS Lambda Function</text>
  <text x="620" y="170" text-anchor="middle" style="font-size: 11px;">PII Detector</text>
  
  <text x="500" y="195" class="text" style="font-size: 11px; font-weight: bold;">Processing Steps:</text>
  <text x="500" y="215" class="text" style="font-size: 10px;">1. Read document from S3</text>
  <text x="500" y="235" class="text" style="font-size: 10px;">2. Extract text content</text>
  <text x="500" y="255" class="text" style="font-size: 10px;">3. Call Comprehend API</text>
  
  <!-- Lambda Configuration -->
  <rect x="800" y="140" width="250" height="100" class="box" rx="3"/>
  <text x="925" y="165" text-anchor="middle" class="title-text">Lambda Config</text>
  <text x="820" y="185" class="text" style="font-size: 10px;">• Runtime: Python 3.11</text>
  <text x="820" y="205" class="text" style="font-size: 10px;">• Memory: 512 MB</text>
  <text x="820" y="225" class="text" style="font-size: 10px;">• Timeout: 5 minutes</text>
  
  <!-- Step 3: AWS Comprehend -->
  <rect x="480" y="320" width="280" height="160" class="box" rx="5"/>
  <text x="620" y="350" text-anchor="middle" class="title-text">AWS Comprehend</text>
  <text x="620" y="370" text-anchor="middle" style="font-size: 11px;">ML-Powered PII Detection</text>
  
  <text x="500" y="395" class="text" style="font-size: 11px; font-weight: bold;">Detects PII Types:</text>
  <text x="500" y="415" class="text" style="font-size: 10px;">• Names, emails, phones</text>
  <text x="500" y="435" class="text" style="font-size: 10px;">• SSN, driver's license</text>
  <text x="500" y="455" class="text" style="font-size: 10px;">• Credit card numbers</text>
  <text x="500" y="475" class="text" style="font-size: 10px;">• Bank account numbers</text>
  
  <!-- Lambda to Comprehend -->
  <line x1="620" y1="260" x2="620" y2="320" class="line" marker-end="url(#arrowhead)"/>
  <text x="640" y="295" class="step-text">Detect PII entities</text>
  
  <!-- Comprehend Results -->
  <line x1="620" y1="480" x2="620" y2="540" class="line" marker-end="url(#arrowhead)"/>
  <text x="640" y="515" class="step-text">Return PII locations</text>
  <text x="640" y="530" class="step-text">and confidence scores</text>
  
  <!-- Step 4: Output Processing -->
  <rect x="380" y="540" width="480" height="80" class="box" rx="5"/>
  <text x="620" y="565" text-anchor="middle" class="title-text">Redaction Processing</text>
  <text x="620" y="585" text-anchor="middle" style="font-size: 10px;">Replace detected PII with redacted values</text>
  <text x="620" y="605" text-anchor="middle" style="font-size: 10px;">Example: "John Smith" → "[NAME]", "123-45-6789" → "[SSN]"</text>
  
  <!-- Split to outputs -->
  <line x1="480" y1="620" x2="240" y2="680" class="line" marker-end="url(#arrowhead)"/>
  <line x1="760" y1="620" x2="925" y2="680" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Step 5A: S3 Output Bucket -->
  <rect x="100" y="680" width="280" height="100" class="box" rx="5"/>
  <text x="240" y="710" text-anchor="middle" class="title-text">S3 Bucket (Output)</text>
  <text x="240" y="730" text-anchor="middle" style="font-size: 11px;">Redacted Documents</text>
  
  <text x="120" y="755" class="text" style="font-size: 10px;">• Original format preserved</text>
  <text x="120" y="770" class="text" style="font-size: 10px;">• PII replaced with tags</text>
  
  <!-- Step 5B: DynamoDB -->
  <rect x="785" y="680" width="280" height="100" class="box" rx="5"/>
  <text x="925" y="710" text-anchor="middle" class="title-text">DynamoDB</text>
  <text x="925" y="730" text-anchor="middle" style="font-size: 11px;">Audit Trail</text>
  
  <text x="805" y="755" class="text" style="font-size: 10px;">• Processing timestamp</text>
  <text x="805" y="770" class="text" style="font-size: 10px;">• PII types detected</text>
  
  <!-- Key Features -->
  <rect x="100" y="320" width="280" height="160" class="box" rx="5"/>
  <text x="240" y="350" text-anchor="middle" class="title-text">Key Features</text>
  
  <text x="120" y="375" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Automated:</tspan> Event-driven</text>
  <text x="120" y="395" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Scalable:</tspan> 100K+ docs/month</text>
  <text x="120" y="415" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Accurate:</tspan> 99%+ ML detection</text>
  <text x="120" y="435" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Compliant:</tspan> GDPR/CCPA</text>
  <text x="120" y="455" class="text" style="font-size: 11px;">✓ <tspan font-weight="bold">Serverless:</tspan> No infrastructure</text>
  
  <!-- Compliance Info -->
  <rect x="800" y="320" width="250" height="160" class="box" rx="5"/>
  <text x="925" y="350" text-anchor="middle" class="title-text">Compliance</text>
  
  <text x="820" y="375" class="text" style="font-size: 11px; font-weight: bold;">Regulations:</text>
  <text x="820" y="395" class="text" style="font-size: 10px;">• GDPR (EU)</text>
  <text x="820" y="415" class="text" style="font-size: 10px;">• CCPA (California)</text>
  <text x="820" y="435" class="text" style="font-size: 10px;">• HIPAA (Healthcare)</text>
  <text x="820" y="455" class="text" style="font-size: 10px;">• SOX (Financial)</text>
  <text x="820" y="475" class="text" style="font-size: 10px;">• PCI-DSS (Payments)</text>
  
  <!-- Additional Info -->
  <rect x="800" y="540" width="250" height="80" class="box" rx="3"/>
  <text x="925" y="565" text-anchor="middle" class="title-text">Performance</text>
  <text x="820" y="585" class="text" style="font-size: 10px;">• Processing: ~2-5 sec/doc</text>
  <text x="820" y="605" class="text" style="font-size: 10px;">• Cost: ~$0.001/doc</text>
</svg>